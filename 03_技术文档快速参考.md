# CELPIP Compass æŠ€æœ¯æ–‡æ¡£ - å¿«é€Ÿå‚è€ƒ
## å¼€å‘å›¢é˜Ÿå¯åŠ¨æŒ‡å—

**æ–‡æ¡£ç‰ˆæœ¬:** 1.0  
**æ—¥æœŸ:** 2025å¹´12æœˆ29æ—¥  
**ç”¨é€”:** å›¢é˜Ÿå¿«é€Ÿç†è§£æ•´ä½“æ¶æ„  

---

## ğŸ¯ æŠ€æœ¯æ ˆä¸€è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   TECH STACK                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Frontend:  Next.js 14 + React 18 + Tailwind CSS    â”‚
â”‚ State:     Zustand                                 â”‚
â”‚ Backend:   Node.js + Express / Python + FastAPI   â”‚
â”‚ Database:  PostgreSQL + Redis + MongoDB            â”‚
â”‚ Deploy:    Docker + Kubernetes / Vercel + AWS     â”‚
â”‚ Testing:   Jest + Playwright                      â”‚
â”‚ CI/CD:     GitHub Actions                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ é¡¹ç›®åˆå§‹åŒ–ï¼ˆ5åˆ†é’Ÿï¼‰

### 1. Clone + å®‰è£…

```bash
# Clone é¡¹ç›®
git clone https://github.com/your-org/celpip-compass
cd celpip-compass

# åç«¯åˆå§‹åŒ–
cd backend
npm install
cp .env.example .env
# ç¼–è¾‘ .env é…ç½®

# å‰ç«¯åˆå§‹åŒ–
cd ../frontend
npm install
cp .env.example .env.local

# Docker å¯åŠ¨æ•°æ®åº“
cd ..
docker-compose up -d
```

### 2. æ•°æ®åº“è¿ç§»

```bash
cd backend
npm run db:migrate
npm run db:seed  # åˆå§‹åŒ–æµ‹è¯•æ•°æ®
```

### 3. æœ¬åœ°å¼€å‘

```bash
# ç»ˆç«¯1: åç«¯
cd backend
npm run dev      # è¿è¡Œåœ¨ http://localhost:3001

# ç»ˆç«¯2: å‰ç«¯
cd frontend
npm run dev      # è¿è¡Œåœ¨ http://localhost:3000
```

---

## ğŸ—ï¸ æ¶æ„ç®€å›¾

```
ç”¨æˆ·æµè§ˆå™¨
    â†“
Next.js å‰ç«¯ (http://localhost:3000)
    â”œâ”€ React ç»„ä»¶ (Responsive UI)
    â”œâ”€ Zustand çŠ¶æ€ç®¡ç†
    â””â”€ Tailwind CSS æ ·å¼
    â†“
Express API (http://localhost:3001/api/v1)
    â”œâ”€ Auth æœåŠ¡ (JWT)
    â”œâ”€ Learning æœåŠ¡
    â”œâ”€ Resources æœåŠ¡
    â””â”€ Community æœåŠ¡
    â†“
æ•°æ®åº“å±‚
    â”œâ”€ PostgreSQL (ç”¨æˆ·æ•°æ®)
    â”œâ”€ Redis (ç¼“å­˜)
    â””â”€ MongoDB (ç¬”è®°æ•°æ®)
```

---

## ğŸ“± å“åº”å¼è®¾è®¡ - 3 ä¸ªå…³é”®ç‚¹

### 1. Breakpointsï¼ˆ5ä¸ªæ¡£ä½ï¼‰

```
xs: 0-480px      (æ‰‹æœºå°: iPhone SE)
sm: 481-768px    (æ‰‹æœºå¤§: iPhone 12)
md: 769-1024px   (å¹³æ¿: iPad)
lg: 1025-1440px  (ç¬”è®°æœ¬: MacBook Air)
xl: 1441px+      (æ¡Œé¢: 4Kæ˜¾ç¤ºå™¨)
```

### 2. å¼€å‘åŸåˆ™ï¼šMobile-First

```typescript
// âŒ é”™è¯¯ï¼šä»æ¡Œé¢å¼€å§‹
.grid { grid-template-columns: repeat(4, 1fr); }
@media (max-width: 768px) { /* å‡å°‘åˆ—æ•° */ }

// âœ… æ­£ç¡®ï¼šä»æ‰‹æœºå¼€å§‹
.grid { grid-template-columns: 1fr; }
@media (min-width: 769px) { grid-template-columns: repeat(2, 1fr); }
@media (min-width: 1025px) { grid-template-columns: repeat(3, 1fr); }
```

### 3. å…³é”®å®ç°

```typescript
// å“åº”å¼Gridç»„ä»¶
<ResponsiveGrid cols={{ xs: 1, sm: 1, md: 2, lg: 3, xl: 4 }}>
  <Card>Item 1</Card>
  <Card>Item 2</Card>
  <Card>Item 3</Card>
</ResponsiveGrid>

// Tailwindå“åº”å¼ç±»
<div className="w-full sm:w-1/2 md:w-1/3 lg:w-1/4">
  Content
</div>

// å“åº”å¼å¯¼èˆª
<nav className="hidden lg:flex">
  {/* æ¡Œé¢å¯¼èˆª */}
</nav>
<nav className="lg:hidden">
  {/* æ‰‹æœºå¯¼èˆª (hamburger menu) */}
</nav>
```

---

## ğŸ”Œ API å¿«é€Ÿå‚è€ƒ

### ä¸»è¦ Endpoints

```
è®¤è¯:
  POST   /api/v1/auth/register         # æ³¨å†Œ
  POST   /api/v1/auth/login            # ç™»å½•
  POST   /api/v1/auth/refresh          # åˆ·æ–°Token

å­¦ä¹ :
  GET    /api/v1/learning-plans        # è·å–è®¡åˆ’
  POST   /api/v1/learning-plans        # åˆ›å»ºè®¡åˆ’
  POST   /api/v1/progress              # è®°å½•è¿›åº¦

èµ„æº:
  GET    /api/v1/resources             # åˆ—è¡¨ (æœ‰åˆ†é¡µ/ç­›é€‰)
  GET    /api/v1/resources/search      # æœç´¢
  GET    /api/v1/resources/:id         # è¯¦æƒ…
```

### è¯·æ±‚å¤´

```javascript
// æ‰€æœ‰å—ä¿æŠ¤çš„è¯·æ±‚éƒ½éœ€è¦
Authorization: Bearer <JWT_TOKEN>
Content-Type: application/json
```

---

## ğŸ—„ï¸ æ•°æ®åº“å¿«é€ŸæŸ¥è¯¢

### PostgreSQL å…³é”®è¡¨

```sql
-- ç”¨æˆ·
SELECT * FROM users WHERE id = 'user-id';

-- å­¦ä¹ è®¡åˆ’
SELECT * FROM learning_plans 
  WHERE user_id = 'user-id' AND status = 'active';

-- è¿›åº¦
SELECT * FROM progress 
  WHERE user_id = 'user-id' 
  ORDER BY created_at DESC;

-- èµ„æº
SELECT * FROM resources 
  WHERE skill_category = 'writing' 
  ORDER BY rating DESC;
```

### Redis ç¼“å­˜é”®çº¦å®š

```
user:${userId}:profile        # ç”¨æˆ·ä¸ªäººèµ„æ–™
progress:${userId}:week${week} # å‘¨è¿›åº¦
resource:${resourceId}        # èµ„æºè¯¦æƒ…
```

---

## ğŸ” è®¤è¯æµç¨‹

### JWT Token æ–¹æ¡ˆ

```
1. ç”¨æˆ·ç™»å½•
   POST /api/v1/auth/login { email, password }
   â†“
   è¿”å›: { accessToken, refreshToken }
   - accessToken: 15åˆ†é’Ÿæœ‰æ•ˆæœŸ (Memory)
   - refreshToken: 7å¤©æœ‰æ•ˆæœŸ (HttpOnly Cookie)

2. å‘é€è¯·æ±‚æ—¶
   Authorization: Bearer accessToken
   
3. Tokenè¿‡æœŸ
   POST /api/v1/auth/refresh
   â†“
   è¿”å›æ–°çš„ accessToken

4. ç™»å‡º
   POST /api/v1/auth/logout (æ¸…é™¤æœåŠ¡ç«¯çš„Refresh Token)
```

### å‰ç«¯å®ç°

```typescript
// services/api.ts
const client = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL
});

// è¯·æ±‚æ‹¦æˆªå™¨
client.interceptors.request.use((config) => {
  const token = useAppStore.getState().token;
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// å“åº”æ‹¦æˆªå™¨
client.interceptors.response.use(
  (res) => res,
  (error) => {
    if (error.response?.status === 401) {
      // Tokenè¿‡æœŸï¼Œè°ƒç”¨refresh
      return refreshToken().then(() => {
        // é‡è¯•åŸå§‹è¯·æ±‚
        return client(error.config);
      });
    }
    return Promise.reject(error);
  }
);
```

---

## ğŸš€ å¸¸è§ä»»åŠ¡

### æ·»åŠ æ–°API

```typescript
// 1. åç«¯æ·»åŠ  route
// backend/src/routes/learning.ts
router.get('/dashboard', authenticateToken, async (req, res) => {
  const data = await LearningService.getDashboard(req.user.userId);
  res.json(data);
});

// 2. å‰ç«¯è°ƒç”¨
// frontend/src/services/api.ts
async getDashboard(userId: string) {
  return this.client.get(`/api/v1/learning/dashboard`);
}

// 3. åœ¨Reactç»„ä»¶ä¸­ä½¿ç”¨
// frontend/src/pages/dashboard.tsx
import { useQuery } from 'react-query';

const Dashboard = () => {
  const { data, isLoading } = useQuery('dashboard', apiService.getDashboard);
  
  return (
    <div>
      {isLoading ? <Spinner /> : <DashboardContent data={data} />}
    </div>
  );
};
```

### æ·»åŠ å“åº”å¼ç»„ä»¶

```typescript
// 1. åˆ›å»ºç»„ä»¶
// frontend/src/components/responsive/NewComponent.tsx
export const NewComponent = () => {
  return (
    <div className="
      p-4 sm:p-6 md:p-8           // å“åº”å¼padding
      grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3  // å“åº”å¼grid
      gap-4 sm:gap-6 md:gap-8     // å“åº”å¼gap
      text-sm sm:text-base md:text-lg  // å“åº”å¼å­—ä½“
    ">
      Content
    </div>
  );
};

// 2. æµ‹è¯•å“åº”å¼
// ç”¨Chrome DevToolsåˆ‡æ¢è§†å£å¤§å°
// F12 â†’ Toggle device toolbar â†’ é€‰æ‹©è®¾å¤‡
```

### éƒ¨ç½²åˆ°ç”Ÿäº§

```bash
# 1. æ„å»ºå‰ç«¯
cd frontend
npm run build
npm run export  # é™æ€å¯¼å‡º

# 2. æ„å»ºåç«¯
cd ../backend
npm run build

# 3. Dockeré•œåƒ
docker build -t celpip-compass-frontend -f frontend/Dockerfile .
docker build -t celpip-compass-backend -f backend/Dockerfile .

# 4. æ¨é€åˆ°äº‘å¹³å°
docker push your-registry/celpip-compass-frontend
docker push your-registry/celpip-compass-backend

# 5. æ›´æ–°Kubernetes
kubectl apply -f k8s/
kubectl rollout restart deployment/celpip-compass-frontend
```

---

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# å•å…ƒæµ‹è¯•
npm run test                 # è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm run test:watch         # ç›‘è§†æ¨¡å¼
npm run test:coverage      # è¦†ç›–ç‡æŠ¥å‘Š

# E2Eæµ‹è¯•
npm run e2e                # è¿è¡ŒPlaywrightæµ‹è¯•
npm run e2e:debug         # è°ƒè¯•æ¨¡å¼
```

### ç¼–å†™æµ‹è¯•

```typescript
// __tests__/Card.test.tsx
import { render, screen } from '@testing-library/react';
import { Card } from '../Card';

describe('Card', () => {
  it('renders with title', () => {
    render(<Card title="Test">Content</Card>);
    expect(screen.getByText('Test')).toBeInTheDocument();
  });

  it('is responsive', () => {
    const { container } = render(<Card>Content</Card>);
    expect(container.firstChild).toHaveClass('p-4', 'sm:p-6', 'md:p-8');
  });
});
```

---

## ğŸ“Š æ€§èƒ½ç›®æ ‡

```
Core Web Vitals:
â”œâ”€ LCP (Largest Contentful Paint): < 2.5ç§’
â”œâ”€ FID (First Input Delay): < 100æ¯«ç§’
â””â”€ CLS (Cumulative Layout Shift): < 0.1

é¡µé¢åŠ è½½:
â”œâ”€ é¦–å±: < 2ç§’
â”œâ”€ å¯¼èˆª: < 1ç§’
â”œâ”€ API: < 500æ¯«ç§’
â””â”€ æ€»å¤§å°: < 100KB (gzip)

å¯ç”¨æ€§:
â””â”€ æ­£å¸¸è¿è¡Œæ—¶é—´: 99.9%
```

### æ€§èƒ½æ£€æŸ¥

```bash
# Lighthouseå®¡è®¡
npm run lighthouse

# Bundleåˆ†æ
npm run analyze

# æ€§èƒ½ç›‘æµ‹
npm run profile
```

---

## ğŸ› å¸¸è§é—®é¢˜æ’æŸ¥

### é—®é¢˜ï¼šCORSé”™è¯¯

```
è§£å†³:
1. æ£€æŸ¥åç«¯CORSé…ç½®
   app.use(cors({
     origin: process.env.FRONTEND_URL,
     credentials: true
   }));

2. å‰ç«¯æ£€æŸ¥API_URLæ˜¯å¦æ­£ç¡®
   NEXT_PUBLIC_API_URL=http://localhost:3001
```

### é—®é¢˜ï¼šå“åº”å¼ä¸å·¥ä½œ

```
è§£å†³:
1. ç¡®ä¿ç§»é™¤äº†æ‰€æœ‰widthé™åˆ¶
   âŒ width: 1200px
   âœ… max-width: 1200px; width: 100%

2. ç¡®ä¿æœ‰meta viewportæ ‡ç­¾
   <meta name="viewport" content="width=device-width, initial-scale=1.0">

3. åœ¨DevToolsä¸­æµ‹è¯•
   F12 â†’ Toggle device toolbar â†’ é€‰æ‹©è®¾å¤‡
```

### é—®é¢˜ï¼šæ•°æ®åº“è¿æ¥å¤±è´¥

```
è§£å†³:
1. æ£€æŸ¥dockeræ˜¯å¦è¿è¡Œ
   docker ps

2. æ£€æŸ¥ç¯å¢ƒå˜é‡
   echo $DATABASE_URL

3. æ£€æŸ¥æ•°æ®åº“æ—¥å¿—
   docker logs celpip-compass-postgres-1

4. é‡å¯docker-compose
   docker-compose down && docker-compose up -d
```

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

| æ–‡æ¡£ | å†…å®¹ | ä½•æ—¶æŸ¥çœ‹ |
|------|------|---------|
| [High-Level æ¶æ„](01_é«˜å±‚æŠ€æœ¯æ–‡æ¡£.md) | ç³»ç»Ÿå…¨è²Œ | æ–°äººå…¥èŒ |
| [Detailed å®ç°](02_è¯¦ç»†æŠ€æœ¯æ–‡æ¡£.md) | ä»£ç ç»†èŠ‚ | å¼€å‘æ—¶ |
| APIè§„èŒƒ | Endpointåˆ—è¡¨ | é›†æˆAPIæ—¶ |
| æ•°æ®åº“è®¾è®¡ | ERå›¾è¡¨ | Schemaä¿®æ”¹æ—¶ |
| éƒ¨ç½²æŒ‡å— | ä¸Šçº¿æµç¨‹ | éƒ¨ç½²æ—¶ |

---

## ğŸ¤ å›¢é˜Ÿå·¥ä½œæµ

### å¼€å‘æµç¨‹

```
1. æ‹‰å–ä»»åŠ¡
   - ä»Project Boardæ‹‰å–Issue
   - åˆ›å»ºç‰¹æ€§åˆ†æ”¯: git checkout -b feature/xxx

2. æœ¬åœ°å¼€å‘
   - éµå¾ªé¡¹ç›®è§„èŒƒ (Prettier + ESLint)
   - ç¼–å†™æµ‹è¯•
   - æäº¤å‰è¿è¡Œ: npm run lint && npm test

3. æäº¤PR
   - PRæ ‡é¢˜éµå¾ª: [type] description
   - åŒ…å«æµ‹è¯•è¦†ç›–
   - ç­‰å¾…CI/CDé€šè¿‡

4. ä»£ç å®¡æŸ¥
   - è‡³å°‘1ä¸ªapproval
   - ä¿®å¤reviewæ„è§
   - Squash mergeåˆ°main

5. éƒ¨ç½²
   - CI/CDè‡ªåŠ¨éƒ¨ç½²åˆ°staging
   - äººå·¥ç¡®è®¤åéƒ¨ç½²åˆ°production
```

### æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: bugä¿®å¤
docs: æ–‡æ¡£
style: ä»£ç é£æ ¼
refactor: é‡æ„
perf: æ€§èƒ½ä¼˜åŒ–
test: æµ‹è¯•
chore: æ„å»º/ä¾èµ–æ›´æ–°

ç¤ºä¾‹:
  feat: add responsive dashboard
  fix: mobile navigation hamburger menu
  docs: update API documentation
```

---

## ğŸš¨ éƒ¨ç½²æ£€æŸ¥æ¸…å•

ä¸Šçº¿å‰å¿…é¡»å®Œæˆï¼š

- [ ] ä»£ç å®¡æŸ¥å®Œæˆ
- [ ] æ‰€æœ‰æµ‹è¯•é€šè¿‡
- [ ] Lighthouseå¾—åˆ† > 90
- [ ] åœ¨å¤šä¸ªè®¾å¤‡ä¸Šæµ‹è¯•å“åº”å¼
- [ ] æ€§èƒ½æŒ‡æ ‡è¾¾åˆ°ç›®æ ‡
- [ ] å®‰å…¨æ‰«ææ— æ¼æ´
- [ ] æ•°æ®åº“å¤‡ä»½å®Œæˆ
- [ ] å›æ»šè®¡åˆ’å‡†å¤‡å¥½

---

## ğŸ“ å¿«é€Ÿé“¾æ¥

| èµ„æº | é“¾æ¥ |
|------|------|
| GitHub Repo | https://github.com/your-org/celpip-compass |
| APIæ–‡æ¡£ | https://api.celpip-compass.com/docs |
| Monitoring | https://monitoring.celpip-compass.com |
| é”™è¯¯è¿½è¸ª | https://sentry.celpip-compass.com |
| é¡¹ç›®çœ‹æ¿ | https://github.com/your-org/celpip-compass/projects |

---

## ğŸ’¡ å…³é”®æç¤º

```
âœ… DO:
  - ä½¿ç”¨TypeScriptç¡®ä¿ç±»å‹å®‰å…¨
  - ä»å°å¤„å¼€å§‹ï¼Œé€æ­¥ä¼˜åŒ–
  - ä¼˜å…ˆæµ‹è¯•ï¼Œåç»­ä»£ç 
  - å®šæœŸæäº¤ï¼Œå°çš„ã€æœ‰æ„ä¹‰çš„commits
  - åŠæ—¶æ²Ÿé€šï¼Œé‡åˆ°é—®é¢˜ç«‹å³å‘ŠçŸ¥

âŒ DON'T:
  - ä¸è¦å¿½è§†å“åº”å¼æµ‹è¯•
  - ä¸è¦åœ¨mainåˆ†æ”¯ç›´æ¥æäº¤
  - ä¸è¦è·³è¿‡æµ‹è¯•ç›´æ¥éƒ¨ç½²
  - ä¸è¦å¿½è§†æ€§èƒ½è­¦å‘Š
  - ä¸è¦æäº¤æ•æ„Ÿä¿¡æ¯ï¼ˆå¯†é’¥ç­‰ï¼‰
```

---

**CELPIP Compass æŠ€æœ¯æ–‡æ¡£å¿«é€Ÿå‚è€ƒ**  
**ç‰ˆæœ¬ 1.0 | 2025å¹´12æœˆ29æ—¥**  
**Keep it simple, keep it fast, keep it responsive**

